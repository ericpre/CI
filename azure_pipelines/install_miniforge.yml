steps:
- bash: |
    wget -O miniforge3.sh https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh
    chmod +x miniforge3.sh
    bash miniforge3.sh -b -p $(MINIFORGE_PATH)
  displayName: Install Miniforge3 (Linux)
  condition: eq(variables['Agent.OS'], 'Linux')

- bash: |
    wget -O miniforge3.sh https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-$(uname -m).sh
    bash miniforge3.sh -b -p $(MINIFORGE_PATH)
  displayName: Install Miniforge3 (OS X)
  condition: eq(variables['Agent.OS'], 'Darwin')

- script: |
    curl -fsSLo miniforge3.exe https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Windows-x86_64.exe
    start /wait "" miniforge3.exe /InstallationType=JustMe /RegisterPython=0 /S /D=%MINIFORGE_PATH%
  displayName: Install Miniforge3 (Windows)
  condition: eq(variables['Agent.OS'], 'Windows_NT')
